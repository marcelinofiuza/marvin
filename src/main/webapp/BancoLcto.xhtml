<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/Layout.xhtml">

	<ui:define name="content">
		<section class="r42-pagina">
            
            <h:form id="frm">            
                <!-- Mensagem Form -->
                <p:growl id="msg-frm" showDetail="true"/>  
                            
                <!-- Dialogo para selecionar banco e periodo -->
                <p:dialog header="Banco e Período"
                          width="600" 
                          widgetVar="wgSelecaoBanco" 
                          id="selecaoBanco"
                          closable="false" 
                          modal="true"                        
                          resizable="false"                   
                          responsive="true">                

                    <p:panelGrid id="panelSelecao"
                                 columns="2" 
                                 layout="grid" 
                                 styleClass="panelgrid-noborder r42-panelgrid"
                                 columnClasses="ui-grid-col-3, ui-grid-col-9">
                            
                        <p:outputLabel value="Banco" for="banco" />     
                        <p:column>
                            <p:inputText id="banco" 
                                         size="10"
                                         value="#{controleBancoLcto.banco.idBanco}"
                                         readonly="true"/>
                                         
                            <p:commandButton icon="fa fa-search" 
                                             title="Pesquisar"
                                             action="#{pesquisaBanco.abrirDialogo('pesquisaBanco')}"
                                             process="@this"
                                             update="@none">
                                                 
                                <p:ajax event="dialogReturn" 
                                        listener="#{controleBancoLcto.bancoSelecionado}"
                                        process="@this"                                             
                                        update="panelSelecao"/>
                                            
                            </p:commandButton>                                
                        </p:column>
                        
                        <p:outputLabel value="Descrição" for="descricao" />                                                                             
                        <p:inputText id="descricao" size="50"
                                     value="#{controleBancoLcto.banco.descricao}"
                                     readonly="true"/>
                                                             
                        <p:outputLabel value="Periodo" for="periodos"/>
                        <p:selectOneMenu id="periodos" value="#{controleBancoLcto.bancoPeriodo}"
                                         converter="converterPeriodo">
                            <f:selectItems value="#{controleBancoLcto.listaPeriodo}" 
                                           var="periodo" 
                                           itemLabel="#{periodo.dataPeriodo}" 
                                           itemValue="#{periodo}"/>
                        </p:selectOneMenu>                        
                        
                        <p:column>
                            <p:commandButton icon="fa fa-check" 
                                             title="Ok"
                                             process="panelSelecao"                                             
                                             update="toolbar tabela"
                                             action="#{controleBancoLcto.confirmaBanco}"
                                             disabled="#{controleBancoLcto.banco == null}"/>                        

                            <p:commandButton icon="fa fa-close" 
                                             title="Sair"
                                             process="@this"
                                             ajax="false"
                                             action="Inicio.xhmtl?faces-redirect=true"/>
                        </p:column>                        
                        
                    </p:panelGrid>                        
                </p:dialog>
                
                <p:toolbar styleClass="r42-toolbar" id="toolbar">
	                <p:toolbarGroup align="left">
                        <p:commandButton    id="bto-novo" 
                                            title="Novo" 
                                            icon="fa fa-file-o">
                        </p:commandButton>	                
	                </p:toolbarGroup>
	                
                    <p:toolbarGroup align="right"  >
                        <p:outputLabel value="#{controleBancoLcto.banco.idBanco}."/>
                        <p:outputLabel value="#{controleBancoLcto.banco.descricao}"/>
                        <p:spacer height="10" title="Periodo"/>
                        <p:outputLabel value="Periodo: #{controleBancoLcto.bancoPeriodo.dataPeriodo}"/>
                        
                        <p:commandButton    id="bto-troca" 
                                            title="Selecionar Banco" 
                                            icon="fa fa-refresh"
                                            oncomplete="PF('wgSelecaoBanco').show();"/>                        
                    </p:toolbarGroup>	                
                </p:toolbar>
                
                <!-- Listagem dos dados -->
                <p:dataTable value="#{controleBancoLcto.bancoPeriodo.lancamentos}" 
                             var="lancamento" 
                             id="tabela" 
                             reflow="true" 
                             rows="15" 
                             paginator="true"
                             paginatorPosition="top" 
                             emptyMessage="Nenhum Lançamento encontrado">
                             
                    <!-- Colunas -->
                    <p:column headerText="Data">
                        <h:outputText value="#{lancamento.dataLcto}" />
                    </p:column>                             
                    <p:column headerText="Documento">
                        <h:outputText value="#{lancamento.documento}" />
                    </p:column>                          
                    <p:column headerText="Conta">
                        <h:outputText value="#{lancamento.conta.descricao}" />
                    </p:column>                                          
                    <p:column headerText="Valor">
                        <h:outputText value="#{lancamento.valor}" />
                    </p:column>                                 
                </p:dataTable>                
            </h:form>
		</section>
	</ui:define>
</ui:composition>