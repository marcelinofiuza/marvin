<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/templates/Layout.xhtml">

    <ui:define name="content">
        <section class="r42-pagina">
        
            <!-- execução inicial -->
            <f:metadata>
                <f:viewAction action="#{controleBanco.listar}"/>
            </f:metadata>                   
                
	        <h:form id="frm">
	           <!-- Mensagem form -->
	           <p:growl id="msg-frm" showDetail="true"/>
	    
	           <!-- Barra Ferramentas -->
	           <p:toolbar styleClass="r42-toolbar" id="toolbar">
	               <p:toolbarGroup align="left">
	               
                        <p:commandButton    id="bto-novo" 
                                            title="Novo" 
                                            icon="fa fa-file-o" 
                                            actionListener="#{controleBanco.novoCadastro}"
                                            process="@this" 
                                            update="dialogo"                    
                                            oncomplete="PF('wgDados').show()">
                                            <p:resetInput target="dialogo"/>      
                        </p:commandButton> 	               
	               </p:toolbarGroup>
	               
	               <p:toolbarGroup align="right" styleClass="r42-toolbar-right">
	                    <p>Bancos</p>
	               </p:toolbarGroup>
	           </p:toolbar>
	        
	           <!-- Listagem dos dados -->
	           <p:dataTable value="#{controleBanco.listaBancos}" var="banco"
	                        id="tabela"
	                        reflow="true"
	                        rows="15" paginator="true" paginatorPosition="top"
	                        emptyMessage="Nenhum Banco Cadastrado">
	           
	               <!-- Colunas -->
	               <p:column headerText="Id" width="50">
	                   <h:outputText value="#{banco.idBanco}"/>
	               </p:column> 
	               <p:column headerText="Descrilção">
	                   <h:outputText value="#{banco.descricao}"/>
	               </p:column>
	               <p:column headerText="Agência" width="100">
	                   <h:outputText value="#{banco.agencia}"/>
	               </p:column>
                   <p:column headerText="Nome" width="300">
                       <h:outputText value="#{banco.nomeAgencia}"/>
                   </p:column>
                   <p:column headerText="N° Conta" width="100">
                       <h:outputText value="#{banco.numeroConta}"/>
                   </p:column>   
                                                	           
	           </p:dataTable>	           
	           
                 <!-- Dialogo inclusão/alteração -->
                 <p:dialog styleClass="r42-dialogo"
                           header="Dados Usuário" 
                           widgetVar="wgDados" 
                           id="dialogo"
                           modal="true"
                           resizable="false"                   
                           responsive="true">
                   
                    <!-- Barra de Ferramentas dialogo-->                    
                    <p:defaultCommand target="bto-salvar" scope="dialogo"/>  
                    <p:toolbar>     
                        <p:toolbarGroup align="left">  
                            <p:commandButton id="bto-salvar"
                                             title="Salvar"
                                             icon="fa fa-save"                                           
                                             action="#{controleBanco.salvar}"
                                             process="dialogo" 
                                             update="panel-dados"
                                             oncomplete="if(!args.validationFailed) PF('wgDados').hide()"/>
                        </p:toolbarGroup>
                    </p:toolbar>
                    
                    <p:messages id="messages" showDetail="false" autoUpdate="true" closable="true" />
                   
                    <!-- Dados Dialogo -->
                    <p:tabView id="panel-dados">
                    
                        <!-- Aba Dados Banco -->
                        <p:tab title="Dados Banco">                                            
                            <p:panelGrid columns="2" layout="grid"                                          
                                         styleClass="panelgrid-noborder r42-panelgrid"
                                         columnClasses="ui-grid-col-3, ui-grid-col-9">
                            
                                <p:outputLabel value="Febraban" for="febraban"/>
                                <p:selectOneMenu id="febraban" value="#{controleBanco.bancoEdicao.febraban}">
                                    <f:selectItem  itemLabel="Selecione"/>
                                    <f:selectItems value="#{controleBanco.febraban}" var="febraban"
                                                   itemLabel="#{febraban.nome}" itemValue="#{febraban}"/>
                                </p:selectOneMenu>                                
                                
                                <p:outputLabel value="Descrição" for="descricao"/>
                                <p:inputText id="descricao" size="50" maxlength="50"
                                             value="#{controleBanco.bancoEdicao.descricao}"
                                             onblur="value=value.toUpperCase()"/>

                                <p:outputLabel value="Agência" for="agencia"/>
                                <p:inputText id="agencia" size="10" maxlength="15"
                                             value="#{controleBanco.bancoEdicao.agencia}"
                                             onblur="value=value.toUpperCase()"/>

                                <p:outputLabel value="Nome Agência" for="nomeAgencia"/>
                                <p:inputText id="nomeAgencia" size="30" maxlength="30"
                                             value="#{controleBanco.bancoEdicao.nomeAgencia}"
                                             onblur="value=value.toUpperCase()"/>
                                                                                                                      
                                <p:outputLabel value="N° Conta" for="numeroConta"/>
                                <p:inputText id="numeroConta" size="15" maxlength="15"
                                             value="#{controleBanco.bancoEdicao.numeroConta}"
                                             onblur="value=value.toUpperCase()"/>
                                                                         
                            </p:panelGrid>
                        </p:tab>
                        
                        <!-- Aba Endereço -->
                        <p:tab title="Endereço">    
                            <p:panelGrid columns="2" layout="grid" 
                                         styleClass="panelgrid-noborder r42-panelgrid"
                                         columnClasses="ui-grid-col-3, ui-grid-col-9">                   
                                
                                <p:outputLabel value="CEP" for="cep"/>
                                <p:inputMask id="cep" size="10" maxlength="9"
                                             value="#{controleBanco.bancoEdicao.endereco.cep}"
                                             mask="99999-999"/>  
                                
                                <p:outputLabel value="Tipo Logradouro" for="tipo-logradouro"/>
                                <p:inputText id="tipo-logradouro" size="15" maxlength="15"
                                             value="#{controleBanco.bancoEdicao.endereco.tipoLogradouro}"
                                             onblur="value=value.toUpperCase()"/>   
                         
                                <p:outputLabel value="Logradouro" for="logradouro"/>
                                <p:inputText id="logradouro" size="50" maxlength="50"
                                             value="#{controleBanco.bancoEdicao.endereco.logradouro}"
                                             onblur="value=value.toUpperCase()"/>
    
                                <p:outputLabel value="Número" for="numero"/>
                                <p:inputText id="numero" size="10" maxlength="10"
                                             value="#{controleBanco.bancoEdicao.endereco.numero}"
                                             onblur="value=value.toUpperCase()"/>
    
                                <p:outputLabel value="Complemento" for="complemento"/>
                                <p:inputText id="complemento" size="20" maxlength="20"
                                             value="#{controleBanco.bancoEdicao.endereco.complemento}"
                                             onblur="value=value.toUpperCase()"/>
    
                                <p:outputLabel value="Bairro" for="bairro"/>
                                <p:inputText id="bairro" size="40" maxlength="40"
                                             value="#{controleBanco.bancoEdicao.endereco.bairro}"
                                             onblur="value=value.toUpperCase()"/>
    
                                <p:outputLabel value="Cidade" for="cidade"/>
                                <p:inputText id="cidade" size="40" maxlength="40"
                                             value="#{controleBanco.bancoEdicao.endereco.cidade}"
                                             onblur="value=value.toUpperCase()"/>
    
                                <p:outputLabel value="Estado" for="uf"/>
                                <p:selectOneMenu style="width: 80%" id="uf" value="#{controleBanco.bancoEdicao.endereco.uf}">
                                    <f:selectItem  itemLabel="Selecione"/>
                                    <f:selectItems style="width: 80%" value="#{controleBanco.estados}" var="estado" 
                                                   itemLabel="#{estado.nome}" itemValue="#{estado}"/>                    
                                </p:selectOneMenu>

                            </p:panelGrid>                              
                        </p:tab>
                                                
                    </p:tabView>                                       
                </p:dialog>	           
	        </h:form>        
        </section>
    </ui:define>
</ui:composition>