<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/Layout.xhtml">

    <ui:define name="content">
        <section class="r42-pagina">
            <h:form id="frm">
                <!-- Mensagem Form -->
                <p:growl id="msg-frm" showDetail="true" autoUpdate="true"/> 
                  
                <p:toolbar styleClass="r42-toolbar" id="toolbar">
                    <p:toolbarGroup align="right" styleClass="r42-toolbar-right">
                        <p:outputLabel value="Migração de Dados"/>
                    </p:toolbarGroup>                
                </p:toolbar>            
                
                <p:dashboard id="board" styleClass="r42-dashboard" model="#{controleMigracao.model}" >
                                    
                    <p:panel id="conta" header="Contas Contábeis">
                        <p:commandButton id="bto-conta"
                                         title="Migrar Contas"
                                         value="Migrar Contas"
                                         process="@this"   
                                         disabled="#{controleMigracao.contaMigrada}"                                      
                                         actionListener="#{controleMigracao.migrarConta}"
                                         update="board"/>

                        <p:ajaxStatus onstart="PF('wgDados').show()" onsuccess="PF('wgDados').hide()" />
                    </p:panel>                    

                    <p:panel id="banco" header="Bancos">
                        <p:commandButton id="bto-banco"
                                         title="Migrar Bancos"
                                         value="Migrar Bancos"
                                         process="@this"   
                                         disabled="#{controleMigracao.bancoMigrado}"                                      
                                         actionListener="#{controleMigracao.migrarBanco}"
                                         update="board"/>

                        <p:ajaxStatus onstart="PF('wgDados').show()" onsuccess="PF('wgDados').hide()" />
                    </p:panel>

                    <p:panel id="cliente" header="Condôminos">
                        <p:commandButton id="bto-condo"
                                         title="Migrar Condôminos "
                                         value="Migrar Condôminos"
                                         process="@this"   
                                         disabled="#{controleMigracao.clienteMigrado}"                                      
                                         actionListener="#{controleMigracao.migrarCliente}"
                                         update="board"/>

                        <p:ajaxStatus onstart="PF('wgDados').show()" onsuccess="PF('wgDados').hide()" />
                    </p:panel>
                                                        
                </p:dashboard>  
                
                <!-- Dialogo de Aguarde -->
                <p:dialog widgetVar="wgDados" 
                          modal="true" 
                          draggable="false"
                          closable="false"
                          resizable="false"
                          responsive="true"
                          showHeader="false">
                    
                    <p:outputLabel value="Migrando..."/>
                    <br/>
                    <h:graphicImage library="resvut42" name="img/loading.gif" />
                    
                </p:dialog>
                          
            </h:form>           
		</section>
	</ui:define>
</ui:composition>